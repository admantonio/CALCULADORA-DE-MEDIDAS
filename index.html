<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Área e Preço de Tapetes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        input::placeholder {
            color: #9ca3af; /* Cor cinza do Tailwind */
        }
        /* Foco customizado para acessibilidade e visual */
        .custom-focus:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #3b82f6; /* Azul do Tailwind */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }
        /* Estilo para o modal de mensagem */
        .modal {
            display: none; /* Oculto por padrão */
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #374151; /* Cor de fundo escura (slate-700) */
            color: #e5e7eb; /* Cor de texto clara (slate-200) */
            margin: auto;
            padding: 20px;
            border: 1px solid #4b5563; /* slate-600 */
            width: 80%;
            max-width: 400px;
            border-radius: 0.5rem; /* rounded-lg */
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .modal-close-button {
            background-color: #3b82f6; /* Azul do Tailwind */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            font-weight: 500;
            margin-top: 15px;
        }
        .modal-close-button:hover {
            background-color: #2563eb; /* Azul mais escuro do Tailwind */
        }
        /* Esconder elementos por padrão */
        .hidden-inputs {
            display: none;
        }
        /* Estilo para os radio buttons */
        .radio-label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border: 1px solid #4b5563; /* slate-600 */
            border-radius: 0.375rem; /* rounded-md */
            margin-right: 0.5rem; /* espaçamento entre botões de rádio */
            transition: background-color 0.2s, border-color 0.2s;
        }
        .radio-label input[type="radio"] {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }
        .radio-label span {
            margin-left: 0.5rem;
        }
        .radio-custom {
            width: 1.25em;
            height: 1.25em;
            border: 2px solid #6b7280; /* slate-500 */
            border-radius: 50%;
            display: inline-block;
            position: relative;
            transition: border-color 0.2s;
        }
        .radio-label input[type="radio"]:checked + .radio-custom {
            border-color: #3b82f6; /* sky-500 */
        }
        .radio-label input[type="radio"]:checked + .radio-custom::after {
            content: "";
            width: 0.75em;
            height: 0.75em;
            background-color: #3b82f6; /* sky-500 */
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .radio-label:hover {
            background-color: #374151; /* slate-700 */
        }
        /* Estilo para o label do radio selecionado */
        .radio-label.selected {
            background-color: #374151; /* slate-700 */
            border-color: #3b82f6; /* sky-500 */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 text-white min-h-screen flex flex-col items-center justify-center p-4 selection:bg-sky-400 selection:text-sky-900">

    <div class="bg-slate-800 p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-md">
        <header class="mb-6 sm:mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-sky-400">Calculadora de Tapetes</h1>
            <p class="text-slate-400 mt-2 text-sm sm:text-base">Escolha o formato, insira as medidas e o valor do m².</p>
        </header>

        <div class="mb-6">
            <label class="block text-sm font-medium text-slate-300 mb-2">Formato do Tapete:</label>
            <div class="flex">
                <label class="radio-label selected" id="labelRedondo">
                    <input type="radio" id="formatoRedondo" name="formatoTapete" value="redondo" checked>
                    <span class="radio-custom"></span>
                    <span>Redondo</span>
                </label>
                <label class="radio-label" id="labelRetangular">
                    <input type="radio" id="formatoRetangular" name="formatoTapete" value="retangular">
                    <span class="radio-custom"></span>
                    <span>Quadrado/Retangular</span>
                </label>
            </div>
        </div>

        <div class="space-y-6">
            <div id="inputsRedondo">
                <div>
                    <label for="diametro" class="block text-sm font-medium text-slate-300 mb-1">Diâmetro (em metros):</label>
                    <input type="number" id="diametro" name="diametro" placeholder="Ex: 2.5"
                           class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:ring-sky-500 focus:border-sky-500 custom-focus transition-colors duration-200">
                </div>
            </div>

            <div id="inputsRetangular" class="hidden-inputs space-y-4">
                <div>
                    <label for="comprimento" class="block text-sm font-medium text-slate-300 mb-1">Comprimento (em metros):</label>
                    <input type="number" id="comprimento" name="comprimento" placeholder="Ex: 3"
                           class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:ring-sky-500 focus:border-sky-500 custom-focus transition-colors duration-200">
                </div>
                <div>
                    <label for="largura" class="block text-sm font-medium text-slate-300 mb-1">Largura (em metros):</label>
                    <input type="number" id="largura" name="largura" placeholder="Ex: 2"
                           class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:ring-sky-500 focus:border-sky-500 custom-focus transition-colors duration-200">
                </div>
            </div>

            <div class="pt-2"> <label for="valorMetro" class="block text-sm font-medium text-slate-300 mb-1">Valor do m² (R$):</label>
                <input type="number" id="valorMetro" name="valorMetro" placeholder="Ex: 75.50"
                       class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:ring-sky-500 focus:border-sky-500 custom-focus transition-colors duration-200">
            </div>

            <button id="calcularBtn"
                    class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75">
                Calcular Área e Preço
            </button>
        </div>

        <div id="resultadoArea" class="mt-6 sm:mt-8 p-6 bg-slate-700 rounded-lg shadow-inner min-h-[100px] flex flex-col items-center justify-center text-center">
            <p class="text-lg text-slate-300">Os resultados aparecerão aqui.</p>
        </div>

        <footer class="mt-8 text-center">
            <p class="text-xs text-slate-500" id="formulaInfo">Fórmula (Redondo): Área = π * (Diâmetro / 2)²</p>
        </footer>
    </div>

    <div id="messageModal" class="modal">
        <div class="modal-content"> <p id="modalMessageText" class="text-lg mb-4"></p>
            <button id="modalCloseBtn" class="modal-close-button">OK</button>
        </div>
    </div>

    <script>
        // Elementos do DOM
        const formatoTapeteRadios = document.querySelectorAll('input[name="formatoTapete"]');
        const inputsRedondoDiv = document.getElementById('inputsRedondo');
        const inputsRetangularDiv = document.getElementById('inputsRetangular');
        const diametroInput = document.getElementById('diametro');
        const comprimentoInput = document.getElementById('comprimento');
        const larguraInput = document.getElementById('largura');
        const valorMetroInput = document.getElementById('valorMetro'); // Novo input
        const calcularBtn = document.getElementById('calcularBtn');
        const resultadoAreaDiv = document.getElementById('resultadoArea');
        const formulaInfo = document.getElementById('formulaInfo');

        // Labels dos radios para estilo
        const labelRedondo = document.getElementById('labelRedondo');
        const labelRetangular = document.getElementById('labelRetangular');

        // Modal elements
        const messageModal = document.getElementById('messageModal');
        const modalMessageText = document.getElementById('modalMessageText');
        const modalCloseBtn = document.getElementById('modalCloseBtn');

        // Função para mostrar o modal
        function showModal(message) {
            modalMessageText.textContent = message;
            messageModal.style.display = 'flex';
        }

        // Função para fechar o modal
        function closeModal() {
            messageModal.style.display = 'none';
        }

        // Event listener para o botão de fechar do modal
        modalCloseBtn.addEventListener('click', closeModal);

        // Event listener para fechar o modal clicando fora dele
        window.addEventListener('click', function(event) {
            if (event.target == messageModal) {
                closeModal();
            }
        });

        // Função para atualizar a visibilidade dos inputs e a fórmula
        function atualizarInterfaceFormato() {
            const formatoSelecionado = document.querySelector('input[name="formatoTapete"]:checked').value;
            if (formatoSelecionado === 'redondo') {
                inputsRedondoDiv.style.display = 'block';
                inputsRetangularDiv.style.display = 'none';
                formulaInfo.textContent = 'Fórmula (Redondo): Área = π * (Diâmetro / 2)²';
                labelRedondo.classList.add('selected');
                labelRetangular.classList.remove('selected');
            } else { // retangular
                inputsRedondoDiv.style.display = 'none';
                inputsRetangularDiv.style.display = 'block';
                formulaInfo.textContent = 'Fórmula (Retangular): Área = Comprimento * Largura';
                labelRetangular.classList.add('selected');
                labelRedondo.classList.remove('selected');
            }
            // Limpar resultado ao trocar de formato e inputs
            resultadoAreaDiv.innerHTML = `<p class="text-lg text-slate-300">Os resultados aparecerão aqui.</p>`;
            diametroInput.value = '';
            comprimentoInput.value = '';
            larguraInput.value = '';
            valorMetroInput.value = ''; // Limpar também o valor do metro
        }

        // Adicionar listeners para os botões de rádio
        formatoTapeteRadios.forEach(radio => {
            radio.addEventListener('change', atualizarInterfaceFormato);
        });

        // Função para calcular a área e o preço
        function calcularAreaEPreco() {
            const formatoSelecionado = document.querySelector('input[name="formatoTapete"]:checked').value;
            let area;
            let calculoValido = true;
            let detalhesCalculo = "";

            // Validar valor do metro quadrado
            const valorMetroTexto = valorMetroInput.value;
            if (valorMetroTexto.trim() === "") {
                showModal("Por favor, insira o valor do metro quadrado (R$).");
                resultadoAreaDiv.innerHTML = `<p class="text-lg text-amber-400">Insira o valor do m².</p>`;
                calculoValido = false;
                valorMetroInput.focus();
                return; // Interrompe se o valor do m² não for inserido
            }
            const valorMetro = parseFloat(valorMetroTexto.replace(',', '.'));
            if (isNaN(valorMetro) || valorMetro <= 0) {
                showModal("Por favor, insira um número positivo válido para o valor do m².");
                resultadoAreaDiv.innerHTML = `<p class="text-lg text-red-400">Valor do m² inválido.</p>`;
                valorMetroInput.focus();
                calculoValido = false;
                return; // Interrompe se o valor do m² for inválido
            }


            if (formatoSelecionado === 'redondo') {
                const diametroTexto = diametroInput.value;
                if (diametroTexto.trim() === "") {
                    showModal("Por favor, insira um valor para o diâmetro.");
                    resultadoAreaDiv.innerHTML = `<p class="text-lg text-amber-400">Insira o diâmetro.</p>`;
                    calculoValido = false;
                } else {
                    const diametro = parseFloat(diametroTexto.replace(',', '.'));
                    if (isNaN(diametro) || diametro <= 0) {
                        showModal("Por favor, insira um número positivo válido para o diâmetro.");
                        resultadoAreaDiv.innerHTML = `<p class="text-lg text-red-400">Diâmetro inválido.</p>`;
                        diametroInput.focus();
                        calculoValido = false;
                    } else {
                        const raio = diametro / 2;
                        area = Math.PI * Math.pow(raio, 2);
                        detalhesCalculo = `(Formato: Redondo, Diâmetro: ${diametro.toLocaleString('pt-BR')} m, Raio: ${raio.toLocaleString('pt-BR')} m)`;
                    }
                }
            } else { // retangular
                const comprimentoTexto = comprimentoInput.value;
                const larguraTexto = larguraInput.value;

                if (comprimentoTexto.trim() === "" || larguraTexto.trim() === "") {
                    showModal("Por favor, insira valores para o comprimento e a largura.");
                    resultadoAreaDiv.innerHTML = `<p class="text-lg text-amber-400">Insira comprimento e largura.</p>`;
                    calculoValido = false;
                } else {
                    const comprimento = parseFloat(comprimentoTexto.replace(',', '.'));
                    const largura = parseFloat(larguraTexto.replace(',', '.'));

                    if (isNaN(comprimento) || comprimento <= 0 || isNaN(largura) || largura <= 0) {
                        showModal("Por favor, insira números positivos válidos para comprimento e largura.");
                        resultadoAreaDiv.innerHTML = `<p class="text-lg text-red-400">Medidas inválidas.</p>`;
                        if (isNaN(comprimento) || comprimento <= 0) comprimentoInput.focus();
                        else if (isNaN(largura) || largura <= 0) larguraInput.focus();
                        calculoValido = false;
                    } else {
                        area = comprimento * largura;
                        detalhesCalculo = `(Formato: Retangular, Comprimento: ${comprimento.toLocaleString('pt-BR')} m, Largura: ${largura.toLocaleString('pt-BR')} m)`;
                    }
                }
            }

            if (calculoValido && area !== undefined) {
                const precoTotal = area * valorMetro;
                resultadoAreaDiv.innerHTML = `
                    <div class="text-center space-y-2">
                        <div>
                            <p class="text-lg font-medium text-slate-300">Área Calculada:</p>
                            <p class="text-2xl font-semibold text-sky-300">
                                <span class="text-white">${area.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 4 })} m²</span>
                            </p>
                        </div>
                        <div>
                            <p class="text-lg font-medium text-slate-300">Preço Total Estimado:</p>
                            <p class="text-2xl font-semibold text-sky-300">
                                <span class="text-white">R$ ${precoTotal.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                            </p>
                        </div>
                        <p class="text-sm text-slate-400 mt-1">
                            ${detalhesCalculo}, Valor m²: R$ ${valorMetro.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                        </p>
                    </div>
                `;
            } else if (calculoValido) { // Se calculoValido é true mas area é undefined, significa que o erro foi no valor do m² e já tratado
                 // Não faz nada aqui, pois a mensagem de erro do valor do m² já foi exibida
            }
        }

        // Adiciona o evento de clique ao botão
        calcularBtn.addEventListener('click', calcularAreaEPreco);

        // Adiciona evento para calcular ao pressionar Enter nos campos de input
        [diametroInput, comprimentoInput, larguraInput, valorMetroInput].forEach(input => {
            input.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    calcularAreaEPreco();
                }
            });
        });
        
        // Chamar a função para configurar a interface inicial ao carregar a página
        document.addEventListener('DOMContentLoaded', atualizarInterfaceFormato);
    </script>

</body>
</html>
